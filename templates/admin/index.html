{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/dashboard.css" %}">
<style>
#content-main {
    width: 100%;
    max-width: none;
}
.module {
    width: 100%;
    max-width: none;
}
</style>
{% endblock %}

{% block coltype %}colMS{% endblock %}

{% block bodyclass %}{{ block.super }} dashboard{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block nav-sidebar %}{% endblock %}

{% block content %}
<div id="content-main">
    <h1>MongoDB Donation Management System</h1>
    
    {% if mongo_stats %}
    <div class="module">
        <h2>📊 System Statistics</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;">
            <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; text-align: center;">
                <h3 style="margin: 0; color: #1976d2;">👥 Users</h3>
                <div style="font-size: 2em; font-weight: bold; color: #1976d2;">{{ mongo_stats.total_users }}</div>
                <div style="color: #666;">Total Users</div>
            </div>
            <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; text-align: center;">
                <h3 style="margin: 0; color: #388e3c;">✅ Active Users</h3>
                <div style="font-size: 2em; font-weight: bold; color: #388e3c;">{{ mongo_stats.active_users }}</div>
                <div style="color: #666;">Currently Active</div>
            </div>
            <div style="background: #fff3e0; padding: 15px; border-radius: 8px; text-align: center;">
                <h3 style="margin: 0; color: #f57c00;">🎁 Donations</h3>
                <div style="font-size: 2em; font-weight: bold; color: #f57c00;">{{ mongo_stats.total_donations }}</div>
                <div style="color: #666;">Total Donations</div>
            </div>
            <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; text-align: center;">
                <h3 style="margin: 0; color: #7b1fa2;">📦 Available</h3>
                <div style="font-size: 2em; font-weight: bold; color: #7b1fa2;">{{ mongo_stats.available_donations }}</div>
                <div style="color: #666;">Available Items</div>
            </div>
            <div style="background: #e0f2f1; padding: 15px; border-radius: 8px; text-align: center;">
                <h3 style="margin: 0; color: #00695c;">🤝 Activities</h3>
                <div style="font-size: 2em; font-weight: bold; color: #00695c;">{{ mongo_stats.total_activities }}</div>
                <div style="color: #666;">Total Activities</div>
            </div>
            <div style="background: #fce4ec; padding: 15px; border-radius: 8px; text-align: center;">
                <h3 style="margin: 0; color: #c2185b;">📋 Items</h3>
                <div style="font-size: 2em; font-weight: bold; color: #c2185b;">{{ mongo_stats.total_items }}</div>
                <div style="color: #666;">Total Items</div>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="module">
        <h2>🔧 Quick Actions</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">👥 User Management</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Manage users, roles, and permissions</p>
                <a href="{% url 'admin:users' %}" class="button">Manage Users</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">🎁 Donation Management</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Monitor donations and items</p>
                <a href="{% url 'admin:donations' %}" class="button">Manage Donations</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">🤝 Activity Management</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Oversee volunteer activities</p>
                <a href="{% url 'admin:activities' %}" class="button">Manage Activities</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">📊 Advanced Dashboard</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Detailed analytics and reports</p>
                <a href="{% url 'admin_dashboard' %}" class="button">View Dashboard</a>
            </div>
        </div>
    </div>

    <div class="module">
        <h2>📋 Recent Activity</h2>
        <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin: 20px 0;">
            <p style="margin: 0; color: #666;">
                MongoDB Admin is now active! All data operations are performed directly against MongoDB collections.
                Use the navigation above to manage different aspects of the donation system.
            </p>
        </div>
    </div>

    <!-- MongoDB Models Section -->
    <div class="module">
        <h2>📋 MongoDB Collections</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 20px 0;">
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">👥 Users</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Manage user accounts and permissions</p>
                <a href="{% url 'admin:users' %}" class="button">View Users</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">🎁 Donors</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Manage donor profiles</p>
                <a href="{% url 'admin:donors' %}" class="button">View Donors</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">📦 Recipients</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Manage recipient profiles</p>
                <a href="{% url 'admin:recipients' %}" class="button">View Recipients</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">🤝 Volunteers</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Manage volunteer profiles</p>
                <a href="{% url 'admin:volunteers' %}" class="button">View Volunteers</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">📋 Items</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Manage donated items</p>
                <a href="{% url 'admin:items' %}" class="button">View Items</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">🎁 Donations</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Manage donation transactions</p>
                <a href="{% url 'admin:donations' %}" class="button">View Donations</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">🏃 Activities</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Manage volunteer activities</p>
                <a href="{% url 'admin:activities' %}" class="button">View Activities</a>
            </div>
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
                <h3 style="margin: 0 0 10px 0;">👥 Volunteer Activities</h3>
                <p style="margin: 0 0 10px 0; color: #666;">Manage activity participation</p>
                <a href="{% url 'admin:volunteer_activities' %}" class="button">View Participation</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block sidebar %}
<div id="content-related">
    <div class="module" id="recent-actions-module">
        <h2>{% translate 'Recent actions' %}</h2>
        <h3>{% translate 'My actions' %}</h3>
        {% load log %}
        {% get_admin_log 10 as admin_log for_user user %}
        {% if not admin_log %}
        <p>{% translate 'None available' %}</p>
        {% else %}
        <ul class="actionlist">
        {% for entry in admin_log %}
        <li class="{% if entry.is_addition %}addlink{% endif %}{% if entry.is_change %}changelink{% endif %}{% if entry.is_deletion %}deletelink{% endif %}">
            {% if entry.is_deletion or not entry.get_admin_url %}
                {{ entry.object_repr }}
            {% else %}
                <a href="{{ entry.get_admin_url }}">{{ entry.object_repr }}</a>
            {% endif %}
            <br>
            {% if entry.content_type %}
                <span class="mini quiet">{% filter capfirst %}{{ entry.content_type.name }}{% endfilter %}</span>
            {% else %}
                <span class="mini quiet">{% translate 'Unknown content' %}</span>
            {% endif %}
        </li>
        {% endfor %}
        </ul>
        {% endif %}
    </div>
</div>
{% endblock %}
